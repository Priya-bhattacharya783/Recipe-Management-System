<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Recipe Finder by Ingredients</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <script src="./config.js"></script>
  <style>
    /* --- same CSS as before --- */
    body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  color: #333;
  margin: 0;
  padding: 20px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
}

.container {
  background-color: #ffffff;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  width: 100%;
  max-width: 800px;
  margin-top: 50px;
  text-align: center;
}

h1 {
  font-size: 2.5rem;
  color: #2c3e50;
  margin-bottom: 20px;
  font-weight: 700;
}

/* --- Search Section --- */
.search-section {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
}

#ingredientsInput {
  flex-grow: 1;
  padding: 12px 15px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s, box-shadow 0.3s;
}

#ingredientsInput:focus {
  outline: none;
  border-color: #3498db;
  box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
}

#searchButton {
  padding: 12px 25px;
  border: none;
  background-color: #3498db;
  color: white;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.3s, transform 0.1s;
}

#searchButton:hover {
  background-color: #2980b9;
}

#searchButton:active {
  transform: translateY(1px);
}

/* --- Status and Error Messages --- */
.loading-indicator, .error-message {
  padding: 15px;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 500;
  display: none;
  margin-top: 20px;
}

.loading-indicator {
  color: #3498db;
  background-color: #eaf6ff;
  border: 1px solid #c2e2ff;
}

.error-message {
  color: #c0392b;
  background-color: #fcebeb;
  border: 1px solid #e7c3c3;
}

/* --- Recipe Display --- */
.recipe-display {
  text-align: left;
  display: none;
  margin-top: 30px;
}

.recipe-header {
  border-bottom: 2px solid #ecf0f1;
  padding-bottom: 15px;
  margin-bottom: 20px;
}

#recipeName {
  font-size: 2rem;
  color: #2c3e50;
  margin: 0;
  font-weight: 600;
}

#recipeDescription {
  color: #7f8c8d;
  font-style: italic;
  font-size: 1rem;
  margin-top: 5px;
}

.recipe-meta {
  display: flex;
  justify-content: space-around;
  margin-bottom: 30px;
  background-color: #f9f9f9;
  padding: 15px;
  border-radius: 8px;
  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
}

.recipe-meta-item {
  text-align: center;
}

.recipe-meta-item strong {
  display: block;
  font-size: 0.9rem;
  color: #7f8c8d;
  margin-bottom: 5px;
}

.recipe-meta-item span {
  font-size: 1.2rem;
  color: #34495e;
  font-weight: 500;
}

.recipe-sections {
  display: flex;
  gap: 40px;
  flex-wrap: wrap;
}

.recipe-section {
  flex: 1;
  min-width: 300px;
}

.recipe-section h3 {
  font-size: 1.5rem;
  color: #2c3e50;
  border-bottom: 2px solid #3498db;
  display: inline-block;
  padding-bottom: 5px;
  margin-bottom: 15px;
}

#ingredientsList, #instructionsList {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

#ingredientsList li, #instructionsList li {
  background-color: #fcfcfc;
  padding: 12px 15px;
  border-radius: 6px;
  margin-bottom: 8px;
  border: 1px solid #eee;
  font-size: 1rem;
}

#instructionsList li {
  counter-increment: instruction-step;
  position: relative;
  padding-left: 35px;
}

#instructionsList li::before {
  content: counter(instruction-step);
  position: absolute;
  left: 15px;
  top: 50%;
  transform: translateY(-50%);
  background-color: #3498db;
  color: white;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 0.8rem;
  font-weight: 600;
}
  </style>
</head>
<body>
  <div class="container">
    <h1>Find Recipes with What You Have!</h1>

    <div class="search-section">
      <input 
        type="text" 
        id="ingredientsInput" 
        placeholder="e.g., chicken, onion, tomato, garlic" 
      />
      <button id="searchButton">Find Recipe</button>
    </div>

    <div id="loadingIndicator" class="loading-indicator">
      Finding recipes for your ingredients...
    </div>

    <div id="errorMessage" class="error-message">
      Could not generate a recipe. Please try with different ingredients.
    </div>

    <div id="recipeDisplay" class="recipe-display">
      <div class="recipe-header">
        <h2 id="recipeName"></h2>
        <p id="recipeDescription"></p>
      </div>

      <div class="recipe-meta">
        <div class="recipe-meta-item">
          <strong>Prep Time</strong>
          <span id="prepTime"></span>
        </div>
        <div class="recipe-meta-item">
          <strong>Cook Time</strong>
          <span id="cookTime"></span>
        </div>
        <div class="recipe-meta-item">
          <strong>Servings</strong>
          <span id="servings"></span>
        </div>
      </div>

      <div class="recipe-sections">
        <div class="recipe-section">
          <h3>Ingredients</h3>
          <ul id="ingredientsList"></ul>
        </div>
        <div class="recipe-section">
          <h3>Instructions</h3>
          <ol id="instructionsList"></ol>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // DOM references
    const ingredientsInput = document.getElementById("ingredientsInput");
    const searchButton = document.getElementById("searchButton");
    const loadingIndicator = document.getElementById("loadingIndicator");
    const errorMessage = document.getElementById("errorMessage");
    const recipeDisplay = document.getElementById("recipeDisplay");

    const recipeName = document.getElementById("recipeName");
    const recipeDescription = document.getElementById("recipeDescription");
    const prepTime = document.getElementById("prepTime");
    const cookTime = document.getElementById("cookTime");
    const servings = document.getElementById("servings");
    const ingredientsList = document.getElementById("ingredientsList");
    const instructionsList = document.getElementById("instructionsList");

    async function fetchRecipeByIngredients(ingredients) {
      loadingIndicator.style.display = "block";
      errorMessage.style.display = "none";
      recipeDisplay.style.display = "none";

      try {
        const response = await axios.post(
          `${BACKEND_URL}/api/generate-recipe-by-ingredients`,
          { ingredients: ingredients }
        );
        return response.data;
      } catch (error) {
        console.error("Error fetching recipe:", error);
        return null;
      } finally {
        loadingIndicator.style.display = "none";
      }
    }

    function displayRecipe(recipe) {
      if (!recipe || !recipe.recipeName) {
        errorMessage.style.display = "block";
        recipeDisplay.style.display = "none";
        return;
      }

      recipeName.textContent = recipe.recipeName;
      recipeDescription.textContent = recipe.description;
      prepTime.textContent = recipe.prepTime || "-";
      cookTime.textContent = recipe.cookTime || "-";
      servings.textContent = recipe.servings || "-";

      ingredientsList.innerHTML = "";
      if (Array.isArray(recipe.ingredients)) {
        recipe.ingredients.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          ingredientsList.appendChild(li);
        });
      }

      instructionsList.innerHTML = "";
      if (Array.isArray(recipe.instructions)) {
        recipe.instructions.forEach(step => {
          const li = document.createElement("li");
          li.textContent = step;
          instructionsList.appendChild(li);
        });
      }

      recipeDisplay.style.display = "block";
    }

    searchButton.addEventListener("click", async () => {
      const ingredients = ingredientsInput.value.trim();
      if (ingredients) {
        const recipe = await fetchRecipeByIngredients(ingredients);
        displayRecipe(recipe);
      } else {
        errorMessage.textContent = "Please enter some ingredients.";
        errorMessage.style.display = "block";
        recipeDisplay.style.display = "none";
      }
    });

    ingredientsInput.addEventListener("keypress", (event) => {
      if (event.key === "Enter") {
        searchButton.click();
      }
    });
  </script>
</body>
</html>
